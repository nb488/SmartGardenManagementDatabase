<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- This meta tag ensures that the website renders correctly across different device sizes, enhancing mobile responsiveness. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Link to the external CSS stylesheet. Uncomment if you wish to customize or add styling. -->
    <link rel="stylesheet" href="styles.css" />

    <title>Database Application</title>
  </head>
  <body>
    <!-- ===================================================================================== -->
    <!-- Display the current status of the database connection.
         !!HERE TO HELP U DEBUGGING, NOT REQUIRED IN YOUR OWN PROJECT!!
         -->
    <!--Displays title and connection status-->
    <div class="titleContainer">
      <h1 class="title">
        <strong>Smart Gardening System</strong> : Database Management Interface
      </h1>
      <h3 class="title">
        Connection Status:
        <!-- An in-line placeholder to display connection status. -->
        <span id="dbStatus"> </span>
        <!-- A loading GIF, will be hided once get the status. -->
        <img
          id="loadingGif"
          class="loading-gif"
          src="loading_100px.gif"
          alt="Loading..."
        />
      </h3>
    </div>

    <!--Displays Query Buttons under titleContainer-->
    <div class="queryButtons">
      <button id="insertbutton" type="button" data-query="insert">
        Insert
      </button>
      <button id="updatebutton" type="button" data-query="update">
        Update
      </button>
      <button id="deletebutton" type="button" data-query="delete">
        Delete
      </button>
      <button id="selectionbutton" type="button" data-query="selection">
        Selection
      </button>
      <button id="projectionbutton" type="button" data-query="projection">
        Projection
      </button>
      <button id="joinbutton" type="button" data-query="join">Join</button>
      <button id="groupbybutton" type="button" data-query="groupby">
        Group By
      </button>
      <button id="havingbutton" type="button" data-query="having">
        Having
      </button>
      <button id="nestedaggbutton" type="button" data-query="nestedagg">
        Nested Agg
      </button>
      <button id="divisionbutton" type="button" data-query="division">
        Division
      </button>
    </div>

    <br /><br />
    <!-- ========================================================================= -->

    <div id="insert-container" class="query-container" style="display: none">
      <form id="insertGardentable" class="queryinputContainer">
        <h2>Insertion Query</h2><br />
          <p>Insert a new garden into the Garden table:</p>
          <br /><br />
          <div class="field">
              <input type="number" id="insertId" placeholder="Garden ID" required />
          </div>
          <div class="field">
              <input
                      type="text"
                      id="insertName"
                      placeholder="Garden Name"
                      maxlength="200"
              required/>
          </div>
          <div class="field">
              <input
                      type="text"
                      id="insertPostalCode"
                      placeholder="Postal Code (ex. XXXXXX)"
                      maxlength="6"
              required/></div>
          <div class="field">
              <input
                      type="text"
                      id="insertStreetName"
                      placeholder="Street Name"
                      maxlength="200"
                      pattern="[A-Za-z ]+"
                      required
              /></div>
          <div class="field">
              <input
                      type="number"
                      id="insertHouseNumber"
                      placeholder="House Number"
              required/></div>
          <div class="field">
              <input type="number" id="insertOwnerId" placeholder="Owner ID"
              required/></div>
        <button type="submit">Insert Garden</button> <br />
        <div id="insertionResultMsg"></div>
        <div id="insertionResult"></div>
      </form>
    </div>

    <div id="update-container" class="query-container" style="display: none">
      <h2>Update Plant</h2>
      <form id="updatePlantForm" class="queryinputContainer">
        <p>Select a plant to update its information:</p>
        <div class="field">
          <label for="updatePlantSelect">Select Plant:</label>
          <select id="updatePlantSelect" class = "select-button" required>
            <option value="">-- Select a Plant --</option>
          </select>
        </div>
        <div id="updatePlantFields" style="display: none">
          <br />
          <p>
            <strong
              >Select which fields to update <br />(check the checkboxes for the
              fields you want to change):</strong
            >
          </p>
          <div class="field">
              <label>
            <input type="checkbox" id="checkLatitude" class="field-checkbox" />
            Latitude:</label>
            <input type="number" id="updateLatitude" step="0.0001" disabled />
          </div>
          <div class="field">
              <label>
            <input type="checkbox" id="checkLongitude" class="field-checkbox" />
            Longitude:</label>
            <input type="number" id="updateLongitude" step="0.0001" disabled />
          </div>
          <div class="field">
              <label>
            <input type="checkbox" id="checkRadius" class="field-checkbox" />
            Radius:</label>
            <input type="number" id="updateRadius" step="0.01" disabled />
          </div>
          <div class="field" style="display: inline-block">
              <br />
              <label>
            <input type="checkbox" id="checkIsReady" class="field-checkbox"/>
            Status:</label>
            <select id="updateIsReady" class="select-button" disabled>
              <option value="0">Not Ready</option>
              <option value="1">Ready</option>
            </select>
          </div>
          <div class="field" style="display: inline-block">
              <label>
            <input type="checkbox" id="checkTypeName" class="field-checkbox" />
           Plant Type:</label>
            <select id="updateTypeName" class="select-button" disabled>
              <option value="">-- Select Type --</option>
            </select>
          </div>
          <div class="field" style="display: inline-block">
              <label>
            <input type="checkbox" id="checkSectionId" class="field-checkbox" />
            Section:</label>
            <select id="updateSectionId" class="select-button" disabled>
              <option value="">-- Select Section --</option>
            </select>
          </div>
            <br /><br />
          <button type="submit">Update Plant</button>
        </div>
        <div id="updateResultMsg"></div>
      </form>
    </div>

    <div id="delete-container" class="query-container" style="display: none">
      <h2>Delete Tool Type Query</h2>
      <form id="deleteToolTypeForm" class="queryinputContainer">
    <p>Select a tool type. All tools of this type will be deleted from every garden.</p>
    <div class="field">
      <label for="deleteToolTypeSelect">Select Tool Type:</label>
      <select id="deleteToolTypeSelect" class="select-button" required>
        <option value="">-- Select a Tool Type --</option>
      </select>
    </div>
    <br />
    <button type="submit">Delete Tool Type</button>
    <div id="deleteResultMsg"></div>
  </form>
</div>

    <div id="selection-container" class="query-container" style="display: none">
      <form id="selectionPlanttable" class="queryinputContainer">
        <h2>Selection Query</h2><br />
          <p>Select plants from the Plant table (conditions based on equality):</p>
          <br /><br />
        <div id="filters-container">
          <div class="filter-row">
            <select class="column-select">
              <option value="plant_id">Plant ID</option>
              <option value="latitude">Latitude</option>
              <option value="longitude">Longitude</option>
              <option value="radius">Radius</option>
              <option value="is_ready">Status (1=Ready, 0=Not Ready)</option>
              <option value="type_name">Type</option>
              <option value="section_id">Section ID</option>
            </select>

            <input class="filter-value" placeholder="Value" required />
          </div>
        </div>
        <div id="selection-buttons" class="select-button">
          <button type="button" id="addFilterButton">Add Filter</button>
          <button type="button" id="removeFilterButton">Remove Filter</button>
          <br />
          <br />
          <button type="submit">Search Plant Table</button>
        </div>
        <br />
        <div id="selectionResultMsg"></div>
      </form>
        <div id="selectionResult"></div>
    </div>

    <div
      id="projection-container"
      class="query-container"
      style="display: none"
    >
      <h2>Projection Query</h2>
      <p>Select which columns to display from the Garden table:</p>
      <form id="projectionGardenForm" class="queryinputContainer">
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projGardenId" value="garden_id" />
          <label for="projGardenId">Garden ID</label>
        </div>
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projName" value="name" />
          <label for="projName">Name</label>
        </div>
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projPostalCode" value="postal_code" />
          <label for="projPostalCode">Postal Code</label>
        </div>
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projStreetName" value="street_name" />
          <label for="projStreetName">Street Name</label>
        </div>
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projHouseNumber" value="house_number" />
          <label for="projHouseNumber">House Number</label>
        </div>
        <div class="field" style="display: inline-block">
          <input type="checkbox" id="projOwnerId" value="owner_id" />
          <label for="projOwnerId">Owner ID</label>
        </div>
        <button type="submit">Show Selected Columns</button>
      </form>
        <br />
        <div id="projectionResultMsg"></div>
          <br />
        <div id="projectionResult"></div>

    </div>

      <div id="join-container" class="query-container" style="display: none">
      <h2>Join Query</h2>
      <form id="joinPlantTypeForm" class="queryinputContainer">
    <p>Select a plant type to see all existing plants and their gardening requirements:</p>
    <div class="field">
      <label for="joinPlantTypeSelect">Select Plant Type:</label>
      <select id="joinPlantTypeSelect" class="select-button" required>
        <option value="">-- Select a Plant Type --</option>
      </select>
    </div>
    <br />
    <button type="submit">Search Plants by Type</button>
      </form>
          <br />
    <div id="joinResultMsg"></div>
          <br />
    <div id="joinResult"></div>
</div>

    <div id="groupby-container" class="query-container" style="display: none">
      <h2>Group By Query</h2>
      <p>See how many plants of each type exist across all gardens:</p>
      <button id="groupByTypeBtn">Show Plant Count By Type</button><br /><br />
      <div id="groupByResultMsg"></div>
        <br />
      <table id="groupByResultTable" border="1">
        <thead>
          <tr>
            <th>Type</th>
            <th>Number of Plants</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="having-container" class="query-container" style="display: none">
      <h2>Having Query</h2>
      <p>Find sections with high water consumption (more than 50 litres):</p>
      <button id="havingBtn">Show High Water Usage Sections</button><br /><br />
      <div id="havingResultMsg"></div>
        <br />
      <table id="havingResultTable" border="1">
        <thead>
          <tr>
            <th>Section ID</th>
            <th>Garden ID</th>
            <th>Garden Name</th>
            <th>Total Water (litres)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="nestedagg-container" class="query-container" style="display: none">
      <h2>Nested Aggregation Query</h2>
      <p>Find sections with above-average plant type diversity:</p>
      <button id="nestedAggBtn">Show Sections Above Average Diversity</button><br /><br />
      <div id="nestedAggResultMsg"></div>
        <br />
      <table id="nestedAggResultTable" border="1">
        <thead>
          <tr>
            <th>Section ID</th>
            <th>Garden ID</th>
            <th>Garden Name</th>
            <th>Plant Type Diversity</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="division-container" class="query-container" style="display: none">
      <h2>Division Query</h2>
      <p>Find sections that have grown ALL available plant types:</p>
      <button id="divisionBtn">Show Sections With All Plant Types</button><br /><br />
      <div id="divisionResultMsg"></div>
        <br />
      <table id="divisionResultTable" border="1">
        <thead>
          <tr>
            <th>Section ID</th>
            <th>Garden ID</th>
            <th>Garden Name</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- ========================================================================= -->

    <h2>Reset + Populate Database</h2>
    <p>
      If this is the first time you're running this page, you MUST use reset
    </p>
    <button id="resetDatabase">Reset</button> <br />
    <div id="resetResultMsg"></div>

    <!-- ========================================================================= -->

    <div id="mainTables">
      <div id="persontableContainer" class="queryTable">
        <h2>Person</h2>
        <table id="persontable" border="1">
          <thead>
            <tr>
              <th>Person ID</th>
              <th>Name</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="postalcodetableContainer" class="queryTable">
        <h2>PostalCode</h2>
        <table id="postalcodetable" border="1">
          <thead>
            <tr>
              <th>Postal Code</th>
              <th>Province</th>
              <th>City</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="tooltypetableContainer" class="queryTable">
        <h2>ToolType</h2>
        <table id="tooltypetable" border="1">
          <thead>
            <tr>
              <th>Name</th>
              <th>Function</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="planttypetableContainer" class="queryTable">
        <h2>PlantType</h2>
        <table id="planttypetable" border="1">
          <thead>
            <tr>
              <th>Name</th>
              <th>Requirements</th>
              <th>Descriptions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="sectiondimensionstableContainer" class="queryTable">
        <h2>SectionDimensions</h2>
        <table id="sectiondimensionstable" border="1">
          <thead>
            <tr>
              <th>Length</th>
              <th>Width</th>
              <th>Area</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="locationtableContainer" class="queryTable">
        <h2>Location</h2>
        <table id="locationtable" border="1">
          <thead>
            <tr>
              <th>Postal Code</th>
              <th>House Number</th>
              <th>Street Name</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="gardentableContainer" class="queryTable">
        <h2>Garden</h2>
        <table id="gardentable" border="1">
          <thead>
            <tr>
              <th>Garden ID</th>
              <th>Name</th>
              <th>Postal Code</th>
              <th>Street Name</th>
              <th>House Number</th>
              <th>Owner ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="tooltableContainer" class="queryTable">
        <h2>Tool</h2>
        <table id="tooltable" border="1">
          <thead>
            <tr>
              <th>Tool ID</th>
              <th>Date Added</th>
              <th>Garden ID</th>
              <th>Type Name</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="hasaccesstableContainer" class="queryTable">
        <h2>HasAccess</h2>
        <table id="hasaccesstable" border="1">
          <thead>
            <tr>
              <th>Garden ID</th>
              <th>Person ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="sectiontableContainer" class="queryTable">
        <h2>Section</h2>
        <table id="sectiontable" border="1">
          <thead>
            <tr>
              <th>Section ID</th>
              <th>Garden ID</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Length</th>
              <th>Width</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="planttableContainer" class="queryTable">
        <h2>Plant</h2>
        <table id="planttable" border="1">
          <thead>
            <tr>
              <th>Plant ID</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Radius</th>
              <th>Status (1=Ready, 0=Not Ready)</th>
              <th>Type</th>
              <th>Section ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="environmentaldatapointtableContainer" class="queryTable">
        <h2>EnvironmentalDataPoint</h2>
        <table id="environmentaldatapointtable" border="1">
          <thead>
            <tr>
              <th>Timestamp</th>
              <th>Section ID</th>
              <th>Temperature</th>
              <th>Moisture</th>
              <th>pH</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="maintenancelogtableContainer" class="queryTable">
        <h2>MaintenanceLog</h2>
        <table id="maintenancelogtable" border="1">
          <thead>
            <tr>
              <th>Maintenance Log ID</th>
              <th>Timestamp</th>
              <th>Entry</th>
              <th>Section ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="watertableContainer" class="queryTable">
        <h2>Water</h2>
        <table id="watertable" border="1">
          <thead>
            <tr>
              <th>Resource Usage ID</th>
              <th>Timestamp</th>
              <th>Volume (l)</th>
              <th>Section ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="nutrienttableContainer" class="queryTable">
        <h2>Nutrient</h2>
        <table id="nutrienttable" border="1">
          <thead>
            <tr>
              <th>Resource Usage ID</th>
              <th>Timestamp</th>
              <th>Nitrogen (g)</th>
              <th>Potassium (g)</th>
              <th>Phosphorus (g)</th>
              <th>Section ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="lighttableContainer" class="queryTable">
        <h2>Light</h2>
        <table id="lighttable" border="1">
          <thead>
            <tr>
              <th>Resource Usage ID</th>
              <th>Timestamp</th>
              <th>Intensity (lux)</th>
              <th>Duration (min)</th>
              <th>Type</th>
              <th>Section ID</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <!-- ===================================================================================== -->
    <!-- External JavaScript file that contains the functionality/logic for the operations above. -->
    <script src="scripts.js"></script>
  </body>
</html>
